{"ast":null,"code":"var _jsxFileName = \"/Users/wmobley/Documents/GitHub/SiteStoriesForm/src/list.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { getAudioFromIndexedDB } from './db';\nimport axios from 'axios';\nimport ExpiredTokenModal from './ExpiredTokenModal';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction List({\n  updateTrigger\n}) {\n  _s();\n  const [formEntries, setFormEntries] = useState([]);\n  const [isLoading, setIsLoading] = useState(false);\n  const [isModalOpen, setIsModalOpen] = useState(false);\n  console.log(isLoading);\n  useEffect(() => {\n    const loadFormData = () => {\n      const data = JSON.parse(localStorage.getItem('siteStoryFormData')) || [];\n      setFormEntries(data);\n    };\n    loadFormData();\n    window.addEventListener('storage', loadFormData);\n    return () => {\n      window.removeEventListener('storage', loadFormData);\n    };\n  }, [updateTrigger]);\n\n  // const uploadAudioToTapis = async (audioURL, fileName) => {\n  //   const jwt = localStorage.getItem('jwt');\n  //   if (!jwt) {\n  //     console.error('No JWT found. Please log in.');\n  //     return;\n  //   }\n\n  //   const formData = new FormData();\n  //   console.log(audioURL)\n  //   formData.append('file', audioURL);\n\n  //   try {\n  //     const response = await axios.post(\n  //       'https://tacc.tapis.io/v3/files/ops/ls6.wmobley//corral-repl/tacc/aci/PT2050/projects/PT2050-138/Interviews/' +fileName.id +\".mp3\",\n  //       formData,\n  //       {\n  //         headers: {\n  //           'X-Tapis-Token': jwt,\n  //           'Content-Type': 'multipart/form-data'\n  //         }\n  //       }\n  //     );\n  //     console.log('File uploaded successfully:', response.data);\n  //   } catch (error) {\n  //     console.error('Error uploading file:', error);\n  //   }\n  // };\n  // const uploadAudioToTapis = async (audioUrl, fileName) => {\n  //   const jwt = localStorage.getItem('jwt');\n  //   if (!jwt) {\n  //     console.error('No JWT found. Please log in.');\n  //     return;\n  //   }\n  //   console.log(fileName.id, audioUrl)\n  //   const body = {\n  //     tag: \"Audio file upload\",\n  //     elements: [\n  //       {\n  //         sourceURI: audioUrl,\n  //         destinationURI: `tapis://ls6.wmobley/corral-repl/tacc/aci/PT2050/projects/PT2050-138/Interviews/${fileName.id}.mp3`\n  //       }\n  //     ]\n  //   };\n\n  //   try {\n  //     const response = await axios.post(\n  //       'https://tacc.tapis.io/v3/files/transfers',\n  //       body,\n  //       {\n  //         headers: {\n  //           'X-Tapis-Token': jwt,\n  //           'Content-Type': 'application/json'\n  //         }\n  //       }\n  //     );\n  //     console.log('File transfer initiated:', response.data);\n  //     return response.data;\n  //   } catch (error) {\n  //     console.error('Error initiating file transfer:', error);\n  //     throw error;\n  //   }\n  // };\n\n  const submitToArcGIS = async formData => {\n    const arcgisUrl = 'https://sitestories.io/arcgis/rest/services/Hosted/Narratives/FeatureServer/0/addFeatures';\n    const feature = {\n      attributes: {\n        description: formData.description,\n        interviewer: localStorage.getItem('username'),\n        time_: new Date(formData.time).getTime(),\n        audiofile: formData.audioFileId + '.mp3',\n        notes: formData.notes,\n        esrignss_latitude: formData.location[1],\n        esrignss_longitude: formData.location[0]\n      },\n      \"geometry\": {\n        spatialReference: {\n          wkid: 4326\n        },\n        \"x\": formData.location[1],\n        \"y\": formData.location[0]\n      }\n    };\n    console.log(feature);\n    const params = new URLSearchParams({\n      features: JSON.stringify([feature]),\n      f: 'json'\n    });\n    try {\n      const response = await fetch(arcgisUrl, {\n        method: 'POST',\n        body: params\n      });\n      const result = await response.json();\n      console.log('ArcGIS submission result:', result.addResults[0]);\n    } catch (error) {\n      console.error('Error submitting to ArcGIS:', error);\n    }\n  };\n\n  // const playAudio = (audioUrl) => {\n  //   const audio = new Audio(audioUrl);\n  //   audio.play()\n  //     .then(() => console.log('Audio playback started'))\n  //     .catch(error => console.error('Error playing audio:', error));\n  // };\n\n  const saveAudioLocally = async (audioURL, fileName) => {\n    try {\n      const response = await fetch(audioURL);\n      const blob = await response.blob();\n      const url = window.URL.createObjectURL(blob);\n      const a = document.createElement('a');\n      a.style.display = 'none';\n      a.href = url;\n      a.download = `${fileName}.mp3`;\n      document.body.appendChild(a);\n      a.click();\n      window.URL.revokeObjectURL(url);\n      console.log('Audio file saved locally');\n    } catch (error) {\n      console.error('Error saving audio file locally:', error);\n    }\n  };\n  const handleSubmit = async entry => {\n    const audioFileId = entry.audioFileId;\n    const jwt = localStorage.getItem('jwt');\n    const jwtExpiration = localStorage.getItem('jwt_expiration');\n    if (!jwt || new Date(jwtExpiration) < new Date()) {\n      console.log(jwt, new Date(jwtExpiration), new Date(), new Date(jwtExpiration) < new Date());\n      setIsModalOpen(true);\n      return;\n    }\n    setIsLoading(true);\n    if (new Date(localStorage.getItem('jwt_expiration')) > Date.now()) {\n      try {\n        const audioData = await getAudioFromIndexedDB(audioFileId);\n        console.log('Audio data retrieved from IndexedDB:', audioData);\n        if (audioData && audioData.result.audioFile) {\n          const audioUrl = URL.createObjectURL(audioData.result.audioFile);\n          saveAudioLocally(audioUrl, audioData.result.id);\n          // You can now use this audioUrl to play the audio or for further processing\n        } else {\n          console.log('Audio file not found');\n        }\n      } catch (error) {\n        console.error('Error loading audio:', error);\n      } finally {\n        setIsLoading(false);\n        submitToArcGIS(entry);\n      }\n    } else {\n      console.log('JWT expired. Please log in again.');\n    }\n  };\n  const handleDelete = id => {\n    const updatedEntries = formEntries.filter(entry => entry.id !== id);\n    setFormEntries(updatedEntries);\n    localStorage.setItem('siteStoryFormData', JSON.stringify(updatedEntries));\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"form-entries-list\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      className: \"submitted-entries-header\",\n      children: \"Submitted Entries\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 201,\n      columnNumber: 7\n    }, this), formEntries.map(entry => /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"metadata-card\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: entry.title\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 205,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n          children: \"Description:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 206,\n          columnNumber: 14\n        }, this), \" \", entry.description]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 206,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n          children: \"Interviewer:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 207,\n          columnNumber: 14\n        }, this), \" \", entry.name]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 207,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n          children: \"Time:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 208,\n          columnNumber: 14\n        }, this), \" \", new Date(entry.time).toLocaleString()]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 208,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n          children: \"Location:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 209,\n          columnNumber: 14\n        }, this), \" \", entry.location]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 209,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n          children: \"Audio File:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 210,\n          columnNumber: 14\n        }, this), \" \", entry.audioFileId + \".mp3\" || 'No file uploaded']\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 210,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n          children: \"Notes:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 211,\n          columnNumber: 14\n        }, this), \" \", entry.notes]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 211,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"button-container\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => handleSubmit(entry),\n          children: \"Submit to PTDataX\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 213,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => handleDelete(entry.id),\n          children: \"Delete\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 216,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 212,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(ExpiredTokenModal, {\n        isOpen: isModalOpen,\n        onClose: () => setIsModalOpen(false)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 218,\n        columnNumber: 11\n      }, this)]\n    }, entry.id, true, {\n      fileName: _jsxFileName,\n      lineNumber: 204,\n      columnNumber: 9\n    }, this))]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 200,\n    columnNumber: 5\n  }, this);\n}\n_s(List, \"Rj92haWpVrsPm83wFQfpiK+nsKg=\");\n_c = List;\nexport default List;\nvar _c;\n$RefreshReg$(_c, \"List\");","map":{"version":3,"names":["React","useState","useEffect","getAudioFromIndexedDB","axios","ExpiredTokenModal","jsxDEV","_jsxDEV","List","updateTrigger","_s","formEntries","setFormEntries","isLoading","setIsLoading","isModalOpen","setIsModalOpen","console","log","loadFormData","data","JSON","parse","localStorage","getItem","window","addEventListener","removeEventListener","submitToArcGIS","formData","arcgisUrl","feature","attributes","description","interviewer","time_","Date","time","getTime","audiofile","audioFileId","notes","esrignss_latitude","location","esrignss_longitude","spatialReference","wkid","params","URLSearchParams","features","stringify","f","response","fetch","method","body","result","json","addResults","error","saveAudioLocally","audioURL","fileName","blob","url","URL","createObjectURL","a","document","createElement","style","display","href","download","appendChild","click","revokeObjectURL","handleSubmit","entry","jwt","jwtExpiration","now","audioData","audioFile","audioUrl","id","handleDelete","updatedEntries","filter","setItem","className","children","_jsxFileName","lineNumber","columnNumber","map","title","name","toLocaleString","onClick","isOpen","onClose","_c","$RefreshReg$"],"sources":["/Users/wmobley/Documents/GitHub/SiteStoriesForm/src/list.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { getAudioFromIndexedDB} from './db';\nimport axios from 'axios';\nimport ExpiredTokenModal from './ExpiredTokenModal';\n\n\n\nfunction List( { updateTrigger }) {\n  const [formEntries, setFormEntries] = useState([]);\n  const [isLoading, setIsLoading] = useState(false);\n  const [isModalOpen, setIsModalOpen] = useState(false);\n  console.log(isLoading)\n  useEffect(() => {\n    const loadFormData = () => {\n      const data = JSON.parse(localStorage.getItem('siteStoryFormData')) || [];\n    \n      setFormEntries(data);\n    };\n\n    loadFormData();\n    window.addEventListener('storage', loadFormData);\n\n    return () => {\n      window.removeEventListener('storage', loadFormData);\n    };\n  }, [updateTrigger]);\n\n  // const uploadAudioToTapis = async (audioURL, fileName) => {\n  //   const jwt = localStorage.getItem('jwt');\n  //   if (!jwt) {\n  //     console.error('No JWT found. Please log in.');\n  //     return;\n  //   }\n  \n  //   const formData = new FormData();\n  //   console.log(audioURL)\n  //   formData.append('file', audioURL);\n  \n  //   try {\n  //     const response = await axios.post(\n  //       'https://tacc.tapis.io/v3/files/ops/ls6.wmobley//corral-repl/tacc/aci/PT2050/projects/PT2050-138/Interviews/' +fileName.id +\".mp3\",\n  //       formData,\n  //       {\n  //         headers: {\n  //           'X-Tapis-Token': jwt,\n  //           'Content-Type': 'multipart/form-data'\n  //         }\n  //       }\n  //     );\n  //     console.log('File uploaded successfully:', response.data);\n  //   } catch (error) {\n  //     console.error('Error uploading file:', error);\n  //   }\n  // };\n  // const uploadAudioToTapis = async (audioUrl, fileName) => {\n  //   const jwt = localStorage.getItem('jwt');\n  //   if (!jwt) {\n  //     console.error('No JWT found. Please log in.');\n  //     return;\n  //   }\n  //   console.log(fileName.id, audioUrl)\n  //   const body = {\n  //     tag: \"Audio file upload\",\n  //     elements: [\n  //       {\n  //         sourceURI: audioUrl,\n  //         destinationURI: `tapis://ls6.wmobley/corral-repl/tacc/aci/PT2050/projects/PT2050-138/Interviews/${fileName.id}.mp3`\n  //       }\n  //     ]\n  //   };\n  \n  //   try {\n  //     const response = await axios.post(\n  //       'https://tacc.tapis.io/v3/files/transfers',\n  //       body,\n  //       {\n  //         headers: {\n  //           'X-Tapis-Token': jwt,\n  //           'Content-Type': 'application/json'\n  //         }\n  //       }\n  //     );\n  //     console.log('File transfer initiated:', response.data);\n  //     return response.data;\n  //   } catch (error) {\n  //     console.error('Error initiating file transfer:', error);\n  //     throw error;\n  //   }\n  // };\n\n  const submitToArcGIS = async (formData) => {\n    const arcgisUrl = 'https://sitestories.io/arcgis/rest/services/Hosted/Narratives/FeatureServer/0/addFeatures';\n    const feature = {\n      attributes: {\n        description: formData.description,\n        interviewer: localStorage.getItem('username'),\n        time_: new Date(formData.time).getTime(),\n        audiofile: formData.audioFileId + '.mp3',\n        notes: formData.notes,\n        esrignss_latitude: formData.location[1],\n        esrignss_longitude: formData.location[0]\n      },\n      \"geometry\": {\n        spatialReference: {\n            wkid: 4326\n          },\n        \"x\": formData.location[1],\n        \"y\": formData.location[0]\n      }\n    };\n    console.log(feature)\n    const params = new URLSearchParams({\n      features: JSON.stringify([feature]),\n      f: 'json'\n    });\n  \n    try {\n      const response = await fetch(arcgisUrl, {\n        method: 'POST',\n        body: params\n      });\n      const result = await response.json();\n      console.log('ArcGIS submission result:', result.addResults[0]);\n    } catch (error) {\n      console.error('Error submitting to ArcGIS:', error);\n    }\n  };\n  \n  // const playAudio = (audioUrl) => {\n  //   const audio = new Audio(audioUrl);\n  //   audio.play()\n  //     .then(() => console.log('Audio playback started'))\n  //     .catch(error => console.error('Error playing audio:', error));\n  // };\n\n  const saveAudioLocally = async (audioURL, fileName) => {\n    try {\n      const response = await fetch(audioURL);\n      const blob = await response.blob();\n      const url = window.URL.createObjectURL(blob);\n      const a = document.createElement('a');\n      a.style.display = 'none';\n      a.href = url;\n      a.download = `${fileName}.mp3`;\n      document.body.appendChild(a);\n      a.click();\n      window.URL.revokeObjectURL(url);\n      console.log('Audio file saved locally');\n    } catch (error) {\n      console.error('Error saving audio file locally:', error);\n    }\n  };\n\nconst handleSubmit = async (entry) => {\n    const audioFileId = entry.audioFileId\n    const jwt = localStorage.getItem('jwt');\n    const jwtExpiration = localStorage.getItem('jwt_expiration');\n\n    if (!jwt || new Date(jwtExpiration) < new Date()) {\n      console.log(jwt ,new Date(jwtExpiration) , new Date(), new Date(jwtExpiration) < new Date())\n      setIsModalOpen(true);\n      return;\n    }\n\n    setIsLoading(true);\n    if(new Date(localStorage.getItem('jwt_expiration'))> Date.now()){\n    try {\n      const audioData = await getAudioFromIndexedDB(audioFileId);\n      console.log('Audio data retrieved from IndexedDB:', audioData);\n\n      if (audioData && audioData.result.audioFile) {\n        const audioUrl = URL.createObjectURL(audioData.result.audioFile);\n        saveAudioLocally(audioUrl, audioData.result.id);\n        // You can now use this audioUrl to play the audio or for further processing\n      } else {\n        console.log('Audio file not found');\n      }\n    } catch (error) {\n      console.error('Error loading audio:', error);\n    } finally {\n      setIsLoading(false);\n      submitToArcGIS(entry);\n   \n    }\n    }else{\n       console.log('JWT expired. Please log in again.');\n    }\n    \n  };\n\n  \n  \n  const handleDelete = (id) => {\n    const updatedEntries = formEntries.filter(entry => entry.id !== id);\n    setFormEntries(updatedEntries);\n    localStorage.setItem('siteStoryFormData', JSON.stringify(updatedEntries));\n  };\n\n  return (\n    <div className=\"form-entries-list\">\n      <h2 className=\"submitted-entries-header\">Submitted Entries</h2>\n\n      {formEntries.map((entry) => (\n        <div key={entry.id} className=\"metadata-card\">\n          <h3>{entry.title}</h3>\n          <p><strong>Description:</strong> {entry.description}</p>\n          <p><strong>Interviewer:</strong> {entry.name}</p>\n          <p><strong>Time:</strong> {new Date(entry.time).toLocaleString()}</p>\n          <p><strong>Location:</strong> {entry.location}</p>\n          <p><strong>Audio File:</strong> {entry.audioFileId +\".mp3\" || 'No file uploaded'}</p>\n          <p><strong>Notes:</strong> {entry.notes}</p>\n          <div className=\"button-container\">\n                    <button onClick={() => handleSubmit(entry)}>\n                    Submit to PTDataX\n                    </button>\n          <button onClick={() => handleDelete(entry.id)}>Delete</button>\n          </div>\n          <ExpiredTokenModal \n        isOpen={isModalOpen} \n        onClose={() => setIsModalOpen(false)} \n      />\n        </div>\n      ))}\n    </div>\n  );\n}\n\nexport default List;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}